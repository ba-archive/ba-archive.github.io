import{a as t}from"./axios.be23cc29.js";import{d as e,a,k as n,e as l,c as o,t as s,g as i,n as r,A as c,p as u,q as d,_ as p,F as v,u as m,r as g,i as f,x as h,m as k,j as C,f as x}from"./index.ecf8ffcb.js";const I=["onKeydown"],S={class:"section-title"},M={class:"ordered-list"},_={class:"title"},w=[(t=>(u("data-v-c6ff9cb6"),t=t(),d(),t))((()=>o("path",{fill:"#344A6E",d:"M225.9 354.7c-8.1 0-16.2-3.1-22.4-9.3L9.3 151.2c-12.4-12.4-12.4-32.4 0-44.8C21.7 94 41.7 94 54 106.4l171.9 171.9 171.9-171.9c12.4-12.4 32.4-12.4 44.7 0 12.4 12.4 12.4 32.4 0 44.8L248.3 345.4c-6.2 6.2-14.3 9.3-22.4 9.3z"},null,-1)))],y=p(e({__name:"StudentArchiveTitle",props:{title:{type:Object,required:!0},index:{type:Number,required:!1},language:{type:String,required:!0},isActive:{type:Boolean,required:!1}},emits:["clicked"],setup(t,{emit:e}){const u=t;function d(){e("clicked")}const p=a((()=>"zh"===u.language?u.title.TextCn||void 0:"jp"===u.language?u.title.TextJp||void 0:u.title.TextEn||void 0));return(e,a)=>{var u;return n(),l("div",{class:"archive-title rounded-small",tabindex:"0",onClick:d,onKeydown:[c(d,["enter"]),c(d,["space"])]},[o("p",S,[o("span",M,s(`${parseInt((null==(u=t.index)?void 0:u.toString())||"0")+1}`.padStart(2,"0")),1),o("span",_,s(i(p)||"!StoryTitleMissing"),1)]),(n(),l("svg",{class:r(["navigate-arrow",t.isActive?"open":""]),xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 451.8 451.8"},w,2))],40,I)}}}),[["__scopeId","data-v-c6ff9cb6"]]),b=e({__name:"MomotalkViewer",props:{messageGroup:null,content:null},setup:t=>(e,a)=>(n(),l(v,null,[o("div",null,s(t.messageGroup),1),o("div",null,s(t.content),1)],64))}),j={class:"momotalk-component-container"},G=p(e({__name:"MomotalkContainer",setup(e){const o=m(),s=a((()=>o.getLang)),r=g({CharacterId:0,title:[],content:[],splitMomotalk:[]}),c=g([]),u=h();return t.get(`/config/json/momotalk/${u.params.id}.json`).then((t=>{const e=t.data;r.value.CharacterId=e.CharacterId,r.value.title=e.title,r.value.content=e.content,r.value.splitMomotalk=function(t){const e=[];for(const a of t)0===e.length?e.push({FavorScheduleId:parseInt(a.CharacterId.toString()+a.ConditionValue.toString().padStart(2,"0")),splitMomotalkContent:[a]}):0===a.ConditionValue?e[e.length-1].splitMomotalkContent.push(a):e.push({FavorScheduleId:parseInt(a.CharacterId.toString()+a.ConditionValue.toString().padStart(2,"0")),splitMomotalkContent:[a]});return e}(e.content)})),(t,e)=>(n(),l("div",j,[(n(!0),l(v,null,f(r.value.title,((t,e)=>{return n(),l("div",{class:"momotalks-view-container flex-vertical",key:e},[k(y,{onClicked:t=>function(t){c.value.includes(t)?c.value=c.value.filter((e=>e!==t)):c.value.push(t)}(e),title:t,language:i(s),index:e,"is-active":c.value.includes(e)},null,8,["onClicked","title","language","index","is-active"]),c.value.includes(e)?(n(),C(b,{key:0,messageGroup:t.GroupId,content:(a=t.GroupId,null==(o=r.value.splitMomotalk.find((t=>t.FavorScheduleId===a)))?void 0:o.splitMomotalkContent)},null,8,["messageGroup","content"])):x("",!0)]);var a,o})),128))]))}}),[["__scopeId","data-v-e377b47d"]]);export{G as default};
